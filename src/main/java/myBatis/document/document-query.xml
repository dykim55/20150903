<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Document">
	
    <select id="selectCategory" resultType="java.util.HashMap">
    
		SELECT ctg.ctgId, ctg.ctgNm, ctg.ctgParent, level
		FROM (
		    SELECT connect_by_category() AS id, @level AS level, @inclause AS inclause
		    FROM (
		        SELECT 
		            @start_with := 0,
		            @id := @start_with,
		            @level := 0,
		            @ctgSct := #{ctgSct},
		            @inclause := ''
		    ) vars, CategoryTbl
		    WHERE @id IS NOT NULL
		) A
		LEFT JOIN CategoryTbl ctg ON ctg.ctgId = A.id
		WHERE A.id IS NOT NULL    
    
    </select>
    	
</mapper>



